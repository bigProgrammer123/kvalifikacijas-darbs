<!DOCTYPE html>
<html lang="en">

<div id="header" class="header">
  <div class="logo"></div>
  <div class="icon_container">
          <span id = "369" class="username span"> Welcome, Mr. Messmer </span>
          <i class="float icon fas fa-tasks"></i> 
          <i id="line" class="line"><span id="notification" style="padding-left: 15px;" class="float fas icon notification"></span></i>
          <i class="float icon fas fa-user-tie"></i>
          <i class="float bars fas fa-bars" style="margin-left: 25px;"></i>
          {/* id="notification" */}
    <nav>

</nav>
  <div id="cart" class="shopping-cart">
    <div class="shopping-cart-header" style="font-size: 30px">
      <span>Notifications</span>
      <span style="font-size: 20px; font-weight: 400; color: rgb(114, 114, 114)"><p>October 12, 2018</p></span>
      <div class="row">
        <span id="rec" style="font-size: 15px; padding-left: 15px; padding-right: 10px; margin-top: -3px;">Recents</span>
    <input class="tgl tgl-light" id="cb1" type="checkbox"/>
    <label class="tgl-btn" for="cb1"></label>
        <span id="type" style="font-size: 15px; font-weight: 400; padding-left: 12px; padding-right: 10px; margin-top: -3px;     color: rgb(180, 180, 180);">Type</span>
        <span class="clear">Clear All</span>
        
      </div>
    </div>

    <div class="shopping-cart-items">
      <section>
        <div class="cart-date">October 5, 2018</div>
      <div id="item-1" class="cart-item">
        <div class="cart-type">System</div>
        <div class="cart-item-header"> outage on 10/15/2018</div>
        <div class="cart-item-date">10/05/2018 :: 12:15pm</div>
        <div class="cart-icon"><i id="trash-1" class="fas fa-trash-alt"></i></div>
      </div>
       <div id="item-2" class="cart-item">
         <div class="cart-type" style="left: 263px">App</div>
        <div class="cart-item-header"> v3.2 deployed</div>
        <div class="cart-item-date">10/05/2018 :: 12:15pm</div>
         <div class="cart-icon"><i id="trash-2" class="fas fa-trash-alt"></i></div>
        
      </div>
       </section>
       <section>
        <div class="cart-date" style="left: -40px;">October 3, 2018</div>
      <div id="item-1" class="cart-item">
        <div class="cart-type">System</div>
        <div class="cart-item-header"> outage on 10/15/2018</div>
        <div class="cart-item-date">10/0/2018 :: 4:45pm</div>
        <div class="cart-icon"><i id="trash-1" class="fas fa-trash-alt"></i></div>
      </div>
   </section>
      
    </div>

    <a id="close" class="button_close" style="color: white">Close</a>
  </div>
      
 </div>
</div>

  <section class="wizard">
 <div style="font-size: 100px;">Wizard</div>
    <section>
  <h1>Notifications</h1>
  <a id="notification-trigger" onclick="setTimeout();"class="button button_1" style="color: white;">Trigger notification</a> 
 </section>
<ul id="notifications-wrapper" class="notification--list">
</ul>
  </section>
</html>
<script>
var noti = document.getElementById('notification');
var bell = document.getElementById('bell');
var header = document.getElementById("header");
var header = document.getElementById("wizard");

function myFunction() {
    document.getElementById("notification").style.visibility = "visible";
    document.getElementById("header").style.opacity = .3;
    document.getElementById("wizard").style.opacity = .3;
}

function closeMe() {
    noti.style.visibility = "hidden";
    header.style.opacity = 1;
    wizard.style.opacity = 1;
}

(function () {
  var notificationsWrapper = document.getElementById('notifications-wrapper'),
      notificationButton = document.getElementById('notification-trigger');

  notificationButton.addEventListener('click', generateNotification);

  // Close Notififcation
  function closeNotification(notification) {
    var itemCount = notificationsWrapper.childElementCount,
        currentItemId = notification.getAttribute('id').split('-')[1],
        nextItem = document.getElementById('item-' + parseInt(currentItemId + 1, 10)),
        removalHeight = notification.offsetHeight;

  notification.setAttribute('data-state', 'fadeout');
    notification.addEventListener('animationend', function() {   

      notification.setAttribute('data-state', 'slideup');  
      this.addEventListener('animationend', function() {
        this.remove();
      });
    });
  }
  
  // Generate Notification
  function generateNotification() {
    $cart.style.visibility = "hidden";
      $line.style.borderBottom = "3px solid white";
    var listItemFragment = document.createDocumentFragment(),
        listItem = document.createElement('li'),
        closeButton = document.createElement('a'),
        closeButtonX = document.createElement('span'),
        closeButtonText = document.createElement('span'),
        title = document.createElement('h5'),
        message = document.createElement('p'),
        notificationCount = 0;

    closeButton.setAttribute('class', 'close');
    closeButtonX.setAttribute('aria-hidden', true);
    closeButtonX.textContent = 'X';
    closeButtonText.setAttribute('class', 'screen-reader-text');
    closeButtonText.textContent = 'close notification';

    title.textContent = 'This is a Test Notification';
    message.textContent = '10/09/2018 :: 3:13pm';

    listItem.setAttribute('id', 'item-'+ notificationsWrapper.childElementCount);
    listItem.setAttribute('class', 'notification--item');
    listItem.setAttribute('role', 'alert');
    
    closeButton.appendChild(closeButtonX);
    closeButton.appendChild(closeButtonText);
    listItem.appendChild(closeButton);
    listItem.appendChild(title);
    listItem.appendChild(message);

    // Append to doc frag(s)
    listItemFragment.appendChild(listItem);
    notificationsWrapper.appendChild(listItemFragment);

    //$(".notification--item").delay(7000).fadeOut(500);


    //setTimeout(function() { closeNotification(this, this.parentNode); }, 8000);
    // Add Events
    closeButton.addEventListener('click', function() {
      closeNotification.call(this, this.parentNode);
    });
 
  }
})();

// Bell animation from yours truly -- Landon
const $button = document.getElementById('notification-trigger');
const $bell = document.getElementById('notification');
const $cart = document.getElementById('cart');
const $line = document.getElementById('line');

$button.addEventListener("click", function(event){
  const count = Number($bell.getAttribute('data-count')) || 2;
  
  $bell.setAttribute('data-count', count + 1);
  $bell.classList.add('show-count');
  $bell.classList.add('notify');
});

$bell.addEventListener("animationend", function(event){
  $bell.classList.remove('notify');
});

setTimeout(function() {
   const count = Number($bell.getAttribute('data-count')) || 2;
 
  $bell.classList.add('show-count');
  $bell.classList.add('notify');
}, 1000);


window.onload = function() {
   const count = Number($bell.getAttribute('data-count')) || 1;
  $bell.setAttribute('data-count', count + 1);
  $bell.classList.add('show-count');
 // $cart.style.visibility = "hidden";
};

//Notification Tray
(function(){
 
  $("#notification").on("click", function() {
    if($('.shopping-cart').is(':visible')){
      $(".shopping-cart").fadeToggle( "fast");
      $cart.style.visibility = "hidden";
      $line.style.borderBottom = "3px solid white";
    }
    else if($('.shopping-cart').is(':hidden')){
      $(".shopping-cart").fadeToggle( "fast");
      $cart.style.visibility = "visible";
      $line.style.borderBottom = "3px solid #729ef9";
    }
 
  });

})();

(function(){
 
  $("#close").on("click", function() {
    if($('.shopping-cart').is(':visible')){
      $(".shopping-cart").fadeToggle( "fast");
      $cart.style.visibility = "hidden";
      $line.style.borderBottom = "3px solid white";
    }
    else if($('.shopping-cart').is(':hidden')){
      $(".shopping-cart").fadeToggle( "fast");
      $cart.style.visibility = "visible";
      $line.style.borderBottom = "3px solid lightGreen";
    }

  });

})();

// If checkbox is click -- change color and font-weight 
$('#cb1').click(function(){
    if (this.checked) {
        $('#rec').css('color', 'rgb(180, 180, 180)')
        $('#rec').css('font-weight', '400')
        $('#type').css('color', 'rgb(14, 80, 136)')
        $('#type').css('font-weight', 'bold')
    }
    else{
      $('#rec').css('color', 'rgb(14, 80, 136)')
        $('#rec').css('font-weight', 'bold')
        $('#type').css('color', 'rgb(180, 180, 180)')
        $('#type').css('font-weight', '400')
    }
}) 

$('#trash-1').click(function(){
        $('#item-1').css('display', 'none')
}) 

$('#trash-2').click(function(){
        $('#item-2').css('display', 'none')
}) 
</script>